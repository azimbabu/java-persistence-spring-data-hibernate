package com.azimbabu.javapersistence.ch06.mappingvaluetypes4.converter;

import java.math.BigDecimal;
import java.math.RoundingMode;
import java.util.Currency;
import java.util.HashMap;
import java.util.Map;

public class CurrencyConverter {

  private static final Map<String, BigDecimal> exchangeRates = new HashMap<>() {{
    put("AED", BigDecimal.valueOf(3.672233));
    put("AFN", BigDecimal.valueOf(69.438683));
    put("ALL", BigDecimal.valueOf(94.614372));
    put("AMD", BigDecimal.valueOf(404.09681));
    put("ANG", BigDecimal.valueOf(1.805244));
    put("AOA", BigDecimal.valueOf(831.261));
    put("ARS", BigDecimal.valueOf(364.628319));
    put("AUD", BigDecimal.valueOf(1.521961));
    put("AWG", BigDecimal.valueOf(1.8));
    put("AZN", BigDecimal.valueOf(1.7));
    put("BAM", BigDecimal.valueOf(1.816856));
    put("BBD", BigDecimal.valueOf(2));
    put("BDT", BigDecimal.valueOf(110.18369));
    put("BGN", BigDecimal.valueOf(1.817111));
    put("BHD", BigDecimal.valueOf(0.377621));
    put("BIF", BigDecimal.valueOf(2850.134435));
    put("BMD", BigDecimal.valueOf(1));
    put("BND", BigDecimal.valueOf(1.341137));
    put("BOB", BigDecimal.valueOf(6.921666));
    put("BRL", BigDecimal.valueOf(4.926796));
    put("BSD", BigDecimal.valueOf(1));
    put("BTC", BigDecimal.valueOf(0.000022828395));
    put("BTN", BigDecimal.valueOf(83.522141));
    put("BWP", BigDecimal.valueOf(13.646392));
    put("BYN", BigDecimal.valueOf(3.300123));
    put("BZD", BigDecimal.valueOf(2.01909));
    put("CAD", BigDecimal.valueOf(1.358485));
    put("CDF", BigDecimal.valueOf(2707.283389));
    put("CHF", BigDecimal.valueOf(0.880417));
    put("CLF", BigDecimal.valueOf(0.031637));
    put("CLP", BigDecimal.valueOf(871.196859));
    put("CNH", BigDecimal.valueOf(7.18195));
    put("CNY", BigDecimal.valueOf(7.141));
    put("COP", BigDecimal.valueOf(3995.498333));
    put("CRC", BigDecimal.valueOf(528.66995));
    put("CUC", BigDecimal.valueOf(1));
    put("CUP", BigDecimal.valueOf(25.75));
    put("CVE", BigDecimal.valueOf(102.431533));
    put("CZK", BigDecimal.valueOf(22.62604));
    put("DJF", BigDecimal.valueOf(178.350632));
    put("DKK", BigDecimal.valueOf(6.927444));
    put("DOP", BigDecimal.valueOf(57.065889));
    put("DZD", BigDecimal.valueOf(134.77995));
    put("EGP", BigDecimal.valueOf(30.958504));
    put("ERN", BigDecimal.valueOf(15));
    put("ETB", BigDecimal.valueOf(55.865399));
    put("EUR", BigDecimal.valueOf(0.928985));
    put("FJD", BigDecimal.valueOf(2.2377));
    put("FKP", BigDecimal.valueOf(0.797465));
    put("GBP", BigDecimal.valueOf(0.797465));
    put("GEL", BigDecimal.valueOf(2.665));
    put("GGP", BigDecimal.valueOf(0.797465));
    put("GHS", BigDecimal.valueOf(12.050442));
    put("GIP", BigDecimal.valueOf(0.797465));
    put("GMD", BigDecimal.valueOf(67.35));
    put("GNF", BigDecimal.valueOf(8609.606192));
    put("GTQ", BigDecimal.valueOf(7.840405));
    put("GYD", BigDecimal.valueOf(209.730917));
    put("HKD", BigDecimal.valueOf(7.809171));
    put("HNL", BigDecimal.valueOf(24.704707));
    put("HRK", BigDecimal.valueOf(7.00168));
    put("HTG", BigDecimal.valueOf(132.487986));
    put("HUF", BigDecimal.valueOf(354.14669));
    put("IDR", BigDecimal.valueOf(15573.642182));
    put("ILS", BigDecimal.valueOf(3.705794));
    put("IMP", BigDecimal.valueOf(0.797465));
    put("INR", BigDecimal.valueOf(83.436359));
    put("IQD", BigDecimal.valueOf(1311.224937));
    put("IRR", BigDecimal.valueOf(42275));
    put("ISK", BigDecimal.valueOf(139.394049));
    put("JEP", BigDecimal.valueOf(0.797465));
    put("JMD", BigDecimal.valueOf(155.897723));
    put("JOD", BigDecimal.valueOf(0.7095));
    put("JPY", BigDecimal.valueOf(144.91841542));
    put("KES", BigDecimal.valueOf(154.968765));
    put("KGS", BigDecimal.valueOf(89.32));
    put("KHR", BigDecimal.valueOf(4121.756793));
    put("KMF", BigDecimal.valueOf(457.849847));
    put("KPW", BigDecimal.valueOf(900));
    put("KRW", BigDecimal.valueOf(1317.42533));
    put("KWD", BigDecimal.valueOf(0.308558));
    put("KYD", BigDecimal.valueOf(0.834762));
    put("KZT", BigDecimal.valueOf(459.58324));
    put("LAK", BigDecimal.valueOf(20758.301156));
    put("LBP", BigDecimal.valueOf(15054.911359));
    put("LKR", BigDecimal.valueOf(327.858078));
    put("LRD", BigDecimal.valueOf(188.250075));
    put("LSL", BigDecimal.valueOf(18.962259));
    put("LYD", BigDecimal.valueOf(4.841729));
    put("MAD", BigDecimal.valueOf(10.147101));
    put("MDL", BigDecimal.valueOf(17.758055));
    put("MGA", BigDecimal.valueOf(4591.837917));
    put("MKD", BigDecimal.valueOf(57.149489));
    put("MMK", BigDecimal.valueOf(2103.533749));
    put("MNT", BigDecimal.valueOf(3450));
    put("MOP", BigDecimal.valueOf(8.060847));
    put("MRU", BigDecimal.valueOf(39.591822));
    put("MUR", BigDecimal.valueOf(44.200027));
    put("MVR", BigDecimal.valueOf(15.35));
    put("MWK", BigDecimal.valueOf(1686.150689));
    put("MXN", BigDecimal.valueOf(17.352047));
    put("MYR", BigDecimal.valueOf(4.665));
    put("MZN", BigDecimal.valueOf(63.899991));
    put("NAD", BigDecimal.valueOf(18.98));
    put("NGN", BigDecimal.valueOf(797.160514));
    put("NIO", BigDecimal.valueOf(36.656682));
    put("NOK", BigDecimal.valueOf(10.91258));
    put("NPR", BigDecimal.valueOf(133.635252));
    put("NZD", BigDecimal.valueOf(1.634697));
    put("OMR", BigDecimal.valueOf(0.385304));
    put("PAB", BigDecimal.valueOf(1));
    put("PEN", BigDecimal.valueOf(3.763952));
    put("PGK", BigDecimal.valueOf(3.734411));
    put("PHP", BigDecimal.valueOf(55.50486));
    put("PKR", BigDecimal.valueOf(284.224538));
    put("PLN", BigDecimal.valueOf(4.024409));
    put("PYG", BigDecimal.valueOf(7363.849127));
    put("QAR", BigDecimal.valueOf(3.643425));
    put("RON", BigDecimal.valueOf(4.614194));
    put("RSD", BigDecimal.valueOf(108.847853));
    put("RUB", BigDecimal.valueOf(92.154999));
    put("RWF", BigDecimal.valueOf(1260.409715));
    put("SAR", BigDecimal.valueOf(3.752958));
    put("SBD", BigDecimal.valueOf(8.475946));
    put("SCR", BigDecimal.valueOf(12.914391));
    put("SDG", BigDecimal.valueOf(601));
    put("SEK", BigDecimal.valueOf(10.469605));
    put("SGD", BigDecimal.valueOf(1.341114));
    put("SHP", BigDecimal.valueOf(0.797465));
    put("SLL", BigDecimal.valueOf(20969.5));
    put("SOS", BigDecimal.valueOf(571.854257));
    put("SRD", BigDecimal.valueOf(37.539));
    put("SSP", BigDecimal.valueOf(130.26));
    put("STD", BigDecimal.valueOf(22281.8));
    put("STN", BigDecimal.valueOf(22.881313));
    put("SVC", BigDecimal.valueOf(8.764718));
    put("SYP", BigDecimal.valueOf(2512.53));
    put("SZL", BigDecimal.valueOf(18.936808));
    put("THB", BigDecimal.valueOf(35.552513));
    put("TJS", BigDecimal.valueOf(10.943311));
    put("TMT", BigDecimal.valueOf(3.5));
    put("TND", BigDecimal.valueOf(3.1305));
    put("TOP", BigDecimal.valueOf(2.359259));
    put("TRY", BigDecimal.valueOf(28.947762));
    put("TTD", BigDecimal.valueOf(6.803688));
    put("TWD", BigDecimal.valueOf(31.430484));
    put("TZS", BigDecimal.valueOf(2509.204189));
    put("UAH", BigDecimal.valueOf(36.793517));
    put("UGX", BigDecimal.valueOf(3776.199131));
    put("USD", BigDecimal.valueOf(1));
    put("UYU", BigDecimal.valueOf(39.145962));
    put("UZS", BigDecimal.valueOf(12332.834804));
    put("VES", BigDecimal.valueOf(35.557328));
    put("VND", BigDecimal.valueOf(24230.272691));
    put("VUV", BigDecimal.valueOf(118.722));
    put("WST", BigDecimal.valueOf(2.8));
    put("XAF", BigDecimal.valueOf(609.373947));
    put("XAG", BigDecimal.valueOf(0.04345748));
    put("XAU", BigDecimal.valueOf(0.00049859));
    put("XCD", BigDecimal.valueOf(2.70255));
    put("XDR", BigDecimal.valueOf(0.753849));
    put("XOF", BigDecimal.valueOf(609.373947));
    put("XPD", BigDecimal.valueOf(0.00105661));
    put("XPF", BigDecimal.valueOf(110.85735));
    put("XPT", BigDecimal.valueOf(0.0010887));
    put("YER", BigDecimal.valueOf(250.324978));
    put("ZAR", BigDecimal.valueOf(18.946455));
    put("ZMW", BigDecimal.valueOf(24.164983));
    put("ZWL", BigDecimal.valueOf(322));
  }};
  private static final BigDecimal USD_TO_CENTS = BigDecimal.valueOf(100);

  public  static BigDecimal convert(BigDecimal amount, Currency fromCurrency, Currency toCurrency) {
    if (!exchangeRates.containsKey(fromCurrency.getCurrencyCode())) {
      throw new RuntimeException("No conversation rate available for currency=" + fromCurrency.getCurrencyCode());
    }
    if (!exchangeRates.containsKey(toCurrency.getCurrencyCode())) {
      throw new RuntimeException("No conversation rate available for currency=" + toCurrency.getCurrencyCode());
    }

    BigDecimal fromRate = exchangeRates.get(fromCurrency.getCurrencyCode());
    if (BigDecimal.ZERO.equals(fromRate)) {
      throw new RuntimeException("Conversion is not available from currency=" + fromCurrency.getCurrencyCode());
    }

    BigDecimal toRate = exchangeRates.get(toCurrency.getCurrencyCode());
    BigDecimal amountInUSCents = amount.multiply(USD_TO_CENTS.divide(fromRate, 5, RoundingMode.HALF_EVEN));
    return amountInUSCents.multiply(toRate).divide(USD_TO_CENTS, 5, RoundingMode.HALF_EVEN);
  }
}
